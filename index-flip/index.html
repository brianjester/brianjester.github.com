<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="IndexFlip - Study decks for Hiragana, Katakana, JLPT N5 Kanji, Morse code, Braille, Periodic Table, FCC Amatuer Radio Technician, Canadian Basic Amateur Radio, California DMV, New York DMV, Music Notes">
    <meta name="author" content="Brian Jester">
    <meta name="generator" content="Notepad++">
    <title>⟳IndexFlip</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/navbar-static/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    
    <!-- Custom styles for flip cards -->
    <link href="default.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="navbar-top.css" rel="stylesheet">
    <!-- PWA - Progressive Web App manifest -->
    <link rel="manifest" href="manifest.json">

  </head>
  <body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" data-bs-theme="dark">
<!-- <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4"> -->
  <div class="container-fluid">
    <a class="navbar-brand" href="#"><span class="fst-italic">⟳Index</span><span class="text-success">Flip</span></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto mb-2 mb-md-0">

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">🇺🇸 DMV</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" class="nav-link active" id="calif_dmv_c_link" aria-current="page" href="#" onclick="loadCaDmvQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇺🇸 Calif DMV</a>
            <li><a class="dropdown-item" class="nav-link active" id="ny_dmv_link" aria-current="page" href="#" onclick="loadNyDmvQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇺🇸 NY DMV</a>
          </ul>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Amateur Radio</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" class="nav-link active" id="fcc_tech_link" aria-current="page" href="#" onclick="loadFccTechQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇺🇸 FCC Tech</a>
            <li><a class="dropdown-item" class="nav-link active" id="ca_basic_link" aria-current="page" href="#" onclick="loadCaBasicQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇨🇦 CDN Basic Amateur Radio</a>
            <li><a class="dropdown-item" class="nav-link active" id="morse_link" aria-current="page" href="#" onclick="loadMorseQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">Morse Code</a>
          </ul>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">🇯🇵 Japanese</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" class="nav-link active" id="jp_hira_link" aria-current="page" href="#" onclick="loadJpHiraQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇯🇵 Hiragana</a>
            <li><a class="dropdown-item" class="nav-link active" id="jp_kata_link" aria-current="page" href="#" onclick="loadJpKataQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇯🇵 Katakana</a>
            <li><a class="dropdown-item" class="nav-link active" id="jlpt_n5_k_link" aria-current="page" href="#" onclick="loadJlptN5KanjiQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇯🇵 JLPT N5 Kanji/Eng</a>
            <li><a class="dropdown-item" class="nav-link active" id="jlpt_n5_k2_link" aria-current="page" href="#" onclick="loadJlptN5Kanji2Questions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇯🇵 JLPT N5 Kanji/Hira</a>
            <li><a class="dropdown-item" class="nav-link active" id="jlpt_n5_v_link" aria-current="page" href="#" onclick="loadJlptN5VocabQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">🇯🇵 JLPT N5 Vocab</a>
          </ul>
        </li>

        <li class="nav-item">
          <a class="nav-link active" id="music_link" aria-current="page" href="#" onclick="loadMusicQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">Music Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" id="braille_link" aria-current="page" href="#" onclick="loadBrailleQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">Braille</a>
        </li>
		    <li class="nav-item">
		      <a class="nav-link active" id="periodic_link" aria-current="page" href="#" onclick="loadPeriodicQuestions()" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">Periodic Table</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

		<!-- Modal content-->
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">&times;</button>
			<h4 class="modal-title">Share this URL</h4>
		  </div>
		  <div class="modal-body">
			<p>Some text in the modal.</p>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		  </div>
		</div>

	  </div>
	</div>
<main class="container">
  <div class="container" role="navigation">
    <div class="row" >
		<div class="d-grid gap-2 d-md-flex mb-2">
		  <H2><div id = "title" class="text-success"><B> </B></div></H2>
		</div>
	</div>
		<div class="d-flex justify-content-center mb-2 gap-2 ">
			<button id="save-btn" class="btn btn-outline-success btn-med" type="button" onclick="saveDeck()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-upload-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0m-.5 14.5V11h1v3.5a.5.5 0 0 1-1 0"/></svg></button><button id="load-btn" class="btn btn-outline-success btn-med" type="button" onclick="loadDeck()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-download-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.5a.5.5 0 0 1 1 0V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0m-.354 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V11h-1v3.293l-2.146-2.147a.5.5 0 0 0-.708.708z"/></svg></button>
	</div>
	
    <div class="row">
      <div class="col-lg-6">

        <div class="flip-card">
          <div class="d-grid gap-2 d-md-flex justify-content-around">
            <row>
				<button id="random-btn" class="btn btn-outline-secondary btn-med me-md-2" type="button" onclick="randomize()">🎲</button>
				<button id="order-btn" class="btn btn-outline-secondary btn-med me-md-2" type="button" onclick="setupOrder()">◀️◀️</button>
				<button id="back-one-btn" class="btn btn-outline-secondary btn-med me-md-2" type="button" onclick="backOne()">◀️</button>
				<a id="current_card"></a>
				<button id="next-btn-1" class="btn btn-outline-secondary btn-med" type="button" onclick="setupCard()"> </button>
            </row>
          </div>
          <div class="flip-card-inner" id="flip-card-inner">

            <div class="flip-card-front">
              <BR>
              <div  style="border: 1px solid grey;padding: 25px;background-color: ivory;">
                <div class="d-flex justify-content-between mb-2"><p id = "question_id" class="text-primary"><u> </u></p><button id="skip-btn" class="btn btn-outline-secondary btn-sm me-md-2" type="button" onclick="skip()">❌</button></div>
                <H5><p id = "question"> </p></H5>
                <p id="figure-front" style="text-align: center;"> </p>
                <p id="figure-attribution" class="text-secondary" style="text-align: center;"> </p>
                <p class="text-secondary" style="text-align: right;" onclick="flipMe(180)"><i>click to flip ⟳</i></p>
              </div>
              <BR>
              <div class="d-flex justify-content-center mb-2">
                <button id="flip-btn-front" class="btn btn-outline-primary btn-med me-md-4" type="button" onclick="flipMe(180)"> </button>
              </div>
              <div class="d-flex justify-content-center mb-2 gap-2">
				  <button class="btn btn-primary btn-sm me-md-2" data-sharer="twitter" data-title="Checkout IndexFlip study site!" data-hashtags="indexflip" data-url="http://indexflip.com">Twitter</button>
				  <button class="btn btn-primary btn-sm me-md-2" data-sharer="facebook" data-hashtag="indexflip" data-url="http://indexflip.com">FB</button>
				  <button class="btn btn-primary btn-sm me-md-2" data-sharer="whatsapp" data-title="Checkout IndexFlip study site!" data-url="http://indexflip.com">WhatsApp</button>
				  <button class="btn btn-primary btn-sm me-md-2" data-sharer="linkedin" data-url="http://indexflip.com">In</button>
				  <button class="btn btn-primary btn-sm me-md-2" data-sharer="email" data-title="IndexFLip Study Site" data-url="http://indexflip.com" data-subject="Checkout IndexFlip study site!" data-to="first.last@example.com">Email</button>
			  </div>            
			</div>

            <div class="flip-card-back">
              <BR>
              <div  style="border: 1px solid grey;padding: 25px;background-color: ivory;">
                <p id = "answer_id" class="text-primary"><u> </u></p>
				<H5><p id = "question-back"> </p></H5>
                <p id="A" onclick='selectAnswer("A")'> </p>
                <p id="B" onclick='selectAnswer("B")'> </p>
                <p id="C" onclick='selectAnswer("C")'> </p>
                <p id="D" onclick='selectAnswer("D")'> </p>
                <p id="E" onclick='selectAnswer("E")'> </p>
                <p id="figure-back" style="text-align: center;"> </p>
                <p id="figure-attribution-back" class="text-secondary" style="text-align: center;"> </p>
                <p class="text-secondary" style="text-align: right;" onclick="flipMe(0)"><i>click to flip ⟳</i></p>
              </div>
              <BR>
              <div class="d-grid gap-2 d-md-flex justify-content-around">
                <row>
                  <button id="check-btn" class="btn btn-primary btn-med me-md-4" type="button" onclick="check()"> </button>
                  <button id="flip-btn-back" class="btn btn-outline-primary btn-med me-md-4" type="button" onclick="flipMe(0)"> </button>
				  <button id="reveal-btn" class="btn btn-primary btn-med me-md-4" type="button" onclick="reveal()"> </button>
                </row>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
</main>
<span class="morse-text" style="font-family: monospace; visibility: visible; font-size: 120%; vertical-align: 1.5ex; white-space: pre-wrap; text-align: center;"></span>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/sharer.js@latest/sharer.min.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JJGDGRJYDW"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7109249808946513"
     crossorigin="anonymous"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-JJGDGRJYDW');
  <!-- PWA - Progressive Web App Service Worker -->
  if ("serviceWorker" in navigator) {
    // register service worker
    navigator.serviceWorker.register("service-worker.js");
  }

// Feature toggles
var show_morse = false; // Show Morse Code dots and dashes (controlled by morse-text class

// Default json page to load   
//window.onload = loadWelcome();
const url = new URL(window.location.href);
const searchParams = url.searchParams;
const test = searchParams.get('q'); // allows custom URL for particular card deck
const tests = ['calif_dmv','ny_dmv','fcc_tech','ca_basic','jp_hira','jp_kata','music','morse', 'periodic', 'n5k', 'n5k2', 'n5v', 'braille'];
if (tests.includes(test)) {
	switch (test) {
	  case 'calif_dmv':
		loadCaDmvQuestions();
		break;
	  case 'ny_dmv':
		loadNyDmvQuestions();
		break;
	  case 'fcc_tech':
		loadFccTechQuestions();
		break;
	  case 'ca_basic':
		loadCaBasicQuestions();
		break;
	  case 'jp_hira':
		loadJpHiraQuestions();
		break;
	  case 'jp_kata':
		loadJpKataQuestions();
		break;
	  case 'music':
		loadMusicQuestions();
		break;
	  case 'morse':
		loadMorseQuestions();
		break;
	  case 'periodic':
		loadPeriodicQuestions();
		break;
	  case 'n5k':
		loadJlptN5KanjiQuestions();
		break;
	  case 'n5k':
		loadJlptN5VocabQuestions();
		break;
	  case 'n5k2':
		loadJlptN5VocabQuestions();
		break;
	  case 'braille':
		loadBrailleQuestions();
		break;
	  default:
		loadWelcome();
	}
} else {
	loadWelcome();
}

async function fetchDeck(my_title, my_link, my_file) {
  gtag('event', 'page_view', {
    "page_title": my_title,
    });
  resetNavLinks();
  document.getElementById(my_link).className = "nav-link active";
  window.json = await fetch('https://brianjester.github.io/index-flip/'+my_file).then(response => { return response.json() });
  postInit();
}

async function loadWelcome() {
  resetNavLinks();
  window.json = await fetch('https://brianjester.github.io/index-flip/welcome.json').then(response => { return response.json() });
  postInit();
}

async function loadCaDmvQuestions() {
	fetchDeck("loadCaDmvQuestions", "calif_dmv_c_link", "questions_us_ca_dl.json");
}

async function loadNyDmvQuestions() {
	fetchDeck("loadNyDmvQuestions", "ny_dmv_link", "questions_us_ny_dl.json");
}

async function loadFccTechQuestions() {
	fetchDeck("loadFccTechQuestions", "fcc_tech_link", "questions_us_fcc_tech.json");
}

async function loadCaBasicQuestions() {
	fetchDeck("loadCaBasicQuestions", "ca_basic_link", "questions_ca_basic.json");
}

async function loadJpHiraQuestions() {
	fetchDeck("loadJpHiraQuestions", "jp_hira_link", "questions_jp_hira.json");
}

async function loadJpKataQuestions() {
	fetchDeck("loadJpKataQuestions", "jp_kata_link", "questions_jp_kata.json");
}

async function loadJlptN5KanjiQuestions() {
	fetchDeck("loadJlptN5KanjiEngQuestions", "jlpt_n5_k_link", "questions_jlpt_n5_k.json");
}

async function loadJlptN5Kanji2Questions() {
	fetchDeck("loadJlptN5KanjiHiraQuestions", "jlpt_n5_k2_link", "questions_jlpt_n5_k2.json");
}

async function loadJlptN5VocabQuestions() {
	fetchDeck("loadJlptN5VocabQuestions", "jlpt_n5_v_link", "questions_jlpt_n5_v.json");
}

async function loadMusicQuestions() {
	fetchDeck("loadMusicQuestions", "music_link", "questions_us_music_notes_1.json");
}

async function loadMorseQuestions() {
	fetchDeck("loadMorseQuestions", "morse_link", "questions_morse.json");
}

async function loadBrailleQuestions() {
	fetchDeck("loadBrailleQuestions", "braille_link", "questions_braille.json");
}

async function loadPeriodicQuestions() {
	fetchDeck("loadPeriodicQuestions", "periodic_link", "questions_periodic.json");
}

function saveDeck() {
  const my_deck = JSON.stringify(window.test);
  localStorage.setItem(window.json.title, my_deck);
}

function loadDeck() {
	try {
		custom_test = JSON.parse(localStorage.getItem(window.json.title));
		if (custom_test) {
			window.test = custom_test;
		}
	} catch (ex) {
		console.error(ex);
	}
	setupCard();
}

function resetNavLinks() {
	let my_links = ["calif_dmv_c_link", "ny_dmv_link", "fcc_tech_link", "ca_basic_link", "jlpt_n5_k_link", "jlpt_n5_k2_link", "jlpt_n5_v_link", "jp_hira_link", "jp_kata_link", "music_link", "morse_link", "periodic_link", "braille_link"];
	for (const my_link of my_links){
		document.getElementById(my_link).className = "nav-link";
	}
}

function postInit() {
  window.test = window.json.test;  // json.test is a CONST, and we might be modifying the test
  setupPage();
  setupOrder();
}

function setupPage() {
  document.getElementById("title").innerHTML = window.json.title;
}

function setupOrder() {
  window.order = "inOrder";
  window.questionRowNum = -1;
  setupCard();
}

function randomize() {
  window.order = "randomize";
  setupCard();
}

function backOne() {
  const test = window.test;  // top level node is test
  window.order = "back-one";  // not actually used anywhere
  window.questionRowNum = (window.questionRowNum == 0) ? test.length - 1 : window.questionRowNum = window.questionRowNum -1;
  setupCard();
  window.order = "inOrder";
}
function skip() {
	trim_test = window.test;  // top level node is test
	trim_test.splice(window.questionRowNum, 1); // 2nd parameter means remove one item only
	window.test = trim_test;
	if (window.questionRowNum < trim_test.length-1) {
	  window.questionRowNum--;
    } else {
      window.questionRowNum = 0;
    }
	setupCard();
}

function setupCard() {
  window.candAnswer="";
  window.multipleChoice = true;
  flipMe(0);
  const SHOW = "👀 Show answer";
  const NEXT = "▶️";
  const FLIP = "⟳ Flip";
  const CHECK = "👁️ Check guess";
  const test = window.test;  // top level node is test
  const numQuestions = test.length;
  var questionRow;

  if (window.order == "inOrder") {
    if (window.questionRowNum < numQuestions-1) {
	  window.questionRowNum++;
    } else {
      window.questionRowNum = 0;
    }
  } else if (window.order == "randomize") {
    window.questionRowNum = Math.floor(Math.random() * numQuestions);
  } 

  questionRow = test[window.questionRowNum];
  if (questionRow.B == "" | !questionRow.hasOwnProperty("B")) {
	window.multipleChoice = false;
  }

  // Set up question
  	let my_answers = ["A", "B", "C", "D", "E"];
	for (const my_answer of my_answers){
		document.getElementById(my_answer).innerHTML = " ";
	}
  document.getElementById("question_id").innerHTML = questionRow.id;
  document.getElementById("current_card").innerHTML = "<b>"+(window.questionRowNum+1) + " of " + numQuestions + "</b> &nbsp";
  document.getElementById("question").innerHTML = questionRow.question;
  if (window.multipleChoice) {
    document.getElementById("question-back").innerHTML = questionRow.question;
  } else {
    document.getElementById("question-back").innerHTML = "";

  }

  applyFeatures();
  if (questionRow.hasOwnProperty("A")) {
  	if (window.multipleChoice) {
		document.getElementById("A").innerHTML = questionRow.A;
	} else {
		document.getElementById("A").innerHTML = "<h1>" + questionRow.A + "<\/h1>";
	}
  }
  if (questionRow.hasOwnProperty("B")) {
    document.getElementById("B").innerHTML = questionRow.B;
  }
  if (questionRow.hasOwnProperty("C")) {
    document.getElementById("C").innerHTML = questionRow.C;
  }
  if (questionRow.hasOwnProperty("D")) {
    document.getElementById("D").innerHTML = questionRow.D;
  }
  if (questionRow.hasOwnProperty("E")) {
    document.getElementById("E").innerHTML = questionRow.E;
  }
  document.getElementById("next-btn-1").innerHTML = NEXT;
  document.getElementById("flip-btn-front").innerHTML = FLIP;

  // Back of card
  document.getElementById("answer_id").innerHTML = questionRow.id;
  if (window.multipleChoice) {
	document.getElementById("question-back").innerHTML = questionRow.question;
  } else {
  	document.getElementById("question-back").innerHTML = "";
  }
  applyFeatures();

  // Remove any possible images from last card
  document.getElementById("figure-front").innerHTML = "";
  document.getElementById("figure-back").innerHTML = "";
  document.getElementById("figure-attribution").innerHTML = " ";
  document.getElementById("figure-attribution-back").innerHTML = " ";
  
  // check for figures/images
  if (questionRow.hasOwnProperty("image")) {
    const cardImage = questionRow.image;
	  // add image
    document.getElementById("figure-front").innerHTML = "<img src=\""+cardImage+"\" alt=\""+cardImage+"\" class=\"img-fluid\">";
	if (window.multipleChoice) {
		document.getElementById("figure-back").innerHTML = "<img src=\""+cardImage+"\" alt=\""+cardImage+"\" class=\"img-fluid\">";
	} else {
		document.getElementById("figure-back").innerHTML = "";
	}
  }

  // check for figure/image attribution
  if (questionRow.hasOwnProperty("attribution")) {
	// add image
    document.getElementById("figure-attribution").innerHTML = "<i><small>* "+questionRow.attribution+"</small></i>";
	if (window.multipleChoice) {
      document.getElementById("figure-attribution-back").innerHTML = "<i><small>* "+questionRow.attribution+"</small></i>";
	} else {
      document.getElementById("figure-attribution-back").innerHTML = "";
	}
  }

  document.getElementById("check-btn").innerHTML = CHECK;
  document.getElementById("reveal-btn").innerHTML = SHOW;
  document.getElementById("flip-btn-back").innerHTML = FLIP;

  // set up answer row
  const answerLetter = questionRow.answer;
  const answerDivLeft='<div id="answer">';
  const answerDivRight='</div>';
  
  switch (answerLetter)
  {
    case "A": 
		if (window.multipleChoice) {
			document.getElementById(answerLetter).innerHTML = answerDivLeft + questionRow.A + answerDivRight;
		} else {
			document.getElementById("A").innerHTML = "<h1 style=\"text-align: center;\">" + answerDivLeft + questionRow.A + "<\/h1>" + answerDivRight;
		}
    break;
    case "B": 
		document.getElementById(answerLetter).innerHTML = answerDivLeft + questionRow.B + answerDivRight;
    break;
    case "C": 
		document.getElementById(answerLetter).innerHTML = answerDivLeft + questionRow.C + answerDivRight;
    break;
    case "D": 
		document.getElementById(answerLetter).innerHTML = answerDivLeft + questionRow.D + answerDivRight;
    break;
    case "E": 
		document.getElementById(answerLetter).innerHTML = answerDivLeft + questionRow.E + answerDivRight;
    break;
    default:
      // placeholder for case not covered
  }
  clearGuessAndAnswer();
  applyFeatures();
}

function applyFeatures() {
  // feature toggles
  //   show/hide morse code dots and dashes
  var morse_toggle_exists = document.getElementById("flexSwitchCheckChecked");
  if(morse_toggle_exists) {
    document.getElementById("flexSwitchCheckChecked").checked = show_morse;
  }
  if(show_morse) {
	document.getElementsByClassName("morse-text")[0].style.visibility = 'visible';
	} else {
	  document.getElementsByClassName("morse-text")[0].style.visibility = 'hidden';
	}
}
function updateFeatures() {
  // feature toggles
  //   show/hide morse code dots and dashes
  var morse_toggle_exists = document.getElementById("flexSwitchCheckChecked");
  if(morse_toggle_exists) {
    show_morse = document.getElementById("flexSwitchCheckChecked").checked;
  }
  if(show_morse) {
	document.getElementsByClassName("morse-text")[0].style.visibility = 'visible';
	} else {
	  document.getElementsByClassName("morse-text")[0].style.visibility = 'hidden';
	}
}

function reveal() {
  const HIDE = "🙈 Hide answer";
  const SHOW = "👀 Show answer";
  if (document.getElementById("reveal-btn").innerHTML == HIDE) {
    document.getElementById("answer").className = "";
    document.getElementById("reveal-btn").innerHTML = SHOW;
  } else {
    document.getElementById("answer").className = "bg-success text-white";
    document.getElementById("reveal-btn").innerHTML = HIDE;
  }
}

function flipMe(degrees) {
  const div = document.getElementById("flip-card-inner");
  div.style.transform = 'rotateY('+degrees+'deg)';
  applyFeatures();
}

function clearGuessAndAnswer() {
  const letters = ["A", "B", "C", "D", "E"];  //TODO Code Smell breaks easily
  for (let i=0;i<letters.length;i++){
    document.getElementById(letters[i]).className = "";
  }
  document.getElementById("answer").className = "";
  window.candAnswer="";
}

function selectAnswer(candidateAnswer) {
  clearGuessAndAnswer();
  document.getElementById("answer").className = "";
  window.candAnswer=candidateAnswer;
  document.getElementById(candidateAnswer).className = "bg-warning";
}

function check() {
  const test = window.test;  // top level node is test
  questionRow = test[window.questionRowNum];
  const candidateAnswer = window.candAnswer;
  const letters = ["A", "B", "C", "D", "E"];  // TODO code smell
  if (window.candAnswer == questionRow.answer) {
    document.getElementById("answer").className = "bg-success text-white";
    var snd = new Audio("success.mp3"); // buffers automatically when created
    snd.play();
  } else {
    // ensure we're only checking if a choice was made
    if (letters.includes(candidateAnswer)) {
      document.getElementById(candidateAnswer).className = "bg-danger text-white";
    }
  }
}

</script>
  </body>
</html>
